-- Optimized Taxi Boss Script
-- Improved performance, smoother loops, cleaner code
-- UI designed for premium feel: Organized tabs, labels, and intuitive controls
-- Compatible with all executors (uses standard loadstring UI lib)
-- Removed Auto Money [auto rejoin] button
-- Anti-AFK and Anti-Staff enabled by default

local vu = game:GetService("VirtualUser")
game:GetService("Players").LocalPlayer.Idled:Connect(function()
    vu:Button2Down(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
    task.wait(1)
    vu:Button2Up(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
end)

-- Anti-Staff Kick
local function checkStaff(player)
    if player:GetRankInGroup(11987919) > 149 then
        game.Players.LocalPlayer:Kick("Auto Kicked Due to Staff Member " .. player.Name .. " joined your game")
    else
        warn(player.Name, "just joined the game")
    end
end

game:GetService("Players").PlayerAdded:Connect(checkStaff)

task.spawn(function()
    warn("Anti Staff is now running")
    while true do
        for _, player in ipairs(game.Players:GetPlayers()) do
            if player:GetRankInGroup(11987919) > 149 then
                game.Players.LocalPlayer:Kick("Auto Kicked Due to Staff Member " .. player.Name .. " is in your game")
            end
        end
        task.wait(5)
    end
end)

-- Load Premium UI Library (optimized load)
local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/Marco8642/science/main/ui%20libs2", true))()

-- Main Window: Auto Features
local mainWindow = library:CreateWindow({
    text = "Taxi Boss - Auto Features"
})

mainWindow:AddLabel("Enable/Disable Automated Farms")
mainWindow:AddToggle("Auto Destroy Pumpkins", function(state)
    getfenv().candy = state
    local function findCar()
        for _, v in ipairs(workspace.Vehicles:GetChildren()) do
            if v:GetAttribute("owner") == game.Players.LocalPlayer.UserId then
                return v
            end
        end
        return nil
    end
    local car = findCar()
    if not car then warn("No car found!") return end
    
    while getfenv().candy do
        task.wait(0.1)  -- Optimized wait for smoothness
        pcall(function()
            for _, v in ipairs(workspace.Pumpkins:GetDescendants()) do
                if v.Name == "TouchInterest" and v:IsA("TouchTransmitter") then
                    firetouchinterest(car.PrimaryPart, v.Parent, 0)
                    firetouchinterest(car.PrimaryPart, v.Parent, 1)
                    task.wait(0.15)  -- Reduced delay for efficiency
                end
            end
        end)
    end
end)

mainWindow:AddToggle("Auto Collect Parts", function(state)
    getfenv().partcollector = state
    while getfenv().partcollector do
        task.wait(0.2)  -- Smoother loop
        for _, location in ipairs(workspace.ItemSpawnLocations:GetChildren()) do
            if not getfenv().partcollector then break end
            local timer = tick()
            repeat task.wait(0.1)
                game.Players.LocalPlayer.Character:PivotTo(location.CFrame + Vector3.new(0, 251, 0))
            until tick() - timer >= 1.5  -- Optimized timeout
            for _, v in ipairs(workspace.ItemSpawnLocations:GetDescendants()) do
                if v.Name == "TouchInterest" and v:IsA("TouchTransmitter") then
                    firetouchinterest(game.Players.LocalPlayer.Character.HumanoidRootPart, v.Parent, 0)
                    firetouchinterest(game.Players.LocalPlayer.Character.HumanoidRootPart, v.Parent, 1)
                end
            end
        end
    end
end)

mainWindow:AddToggle("Auto Money", function(state)
    getfenv().test2 = state
    pcall(function()
        local activeQuests = game:GetService("Players").LocalPlayer.ActiveQuests
        local contract = activeQuests:FindFirstChildOfClass("StringValue")
        if contract then
            game:GetService("ReplicatedStorage").Quests.Contracts.CancelContract:InvokeServer(contract.Name)
        end
    end)
    while getfenv().test2 do
        task.wait(0.1)
        local activeQuests = game:GetService("Players").LocalPlayer.ActiveQuests
        if not activeQuests:FindFirstChild("contractBuildMaterial") then
            game:GetService("ReplicatedStorage").Quests.Contracts.StartContract:InvokeServer("contractBuildMaterial")
            repeat task.wait(0.05) until activeQuests:FindFirstChild("contractBuildMaterial")
        end
        repeat task.wait(0.05)
            task.spawn(function()
                game:GetService("ReplicatedStorage").Quests.DeliveryComplete:InvokeServer("contractMaterial")
            end)
        until activeQuests.contractBuildMaterial.Value == "!pw5pi3ps2" or not getfenv().test2
        game:GetService("ReplicatedStorage").Quests.Contracts.CompleteContract:InvokeServer()
    end
end)

mainWindow:AddToggle("Auto Customers [Beta]", function(state)
    getfenv().customersfarm = state
    pcall(function() workspace.GaragePlate:Destroy() end)
    for _, v in ipairs(workspace.World.Industrial.Port:GetChildren()) do
        if string.find(v.Name, "Container") then v:Destroy() end
    end
    getfenv().numbers = 0
    getfenv().stuck = 0
    local testvalue = 1
    local ohsoso = false
    local antiban = 0
    local raycastParams = RaycastParams.new()
    raycastParams.FilterDescendantsInstances = {game.Players.LocalPlayer.Character, workspace.Camera}
    raycastParams.FilterType = Enum.RaycastFilterType.Exclude
    raycastParams.IgnoreWater = false

    while getfenv().customersfarm do
        task.wait(0.05)  -- Optimized for performance
        pcall(function()
            local chr = game.Players.LocalPlayer.Character
            local hum = chr.Humanoid
            if hum.SeatPart then
                local car = hum.SeatPart.Parent.Parent
                raycastParams.FilterDescendantsInstances[2] = car  -- Cache car in params
                if game.Players.LocalPlayer.variables.inMission.Value and not workspace.ParkingMarkers:FindFirstChild("destinationPart") then
                    antiban = antiban + 1
                    if antiban > 10 then
                        game.Players.LocalPlayer:Kick("Kicked Due to game being glitched")
                    end
                    task.wait(0.5)
                end
                if game.Players.LocalPlayer.variables.inMission.Value and workspace.ParkingMarkers:FindFirstChild("destinationPart") and game.Players.LocalPlayer:DistanceFromCharacter(workspace.ParkingMarkers.destinationPart.Position) < 50 then
                    testvalue = 1
                    car:SetPrimaryPartCFrame(workspace.ParkingMarkers.destinationPart.CFrame + Vector3.new(0, 3, 0))
                    car.PrimaryPart.Velocity = Vector3.zero
                    game:GetService("VirtualInputManager"):SendKeyEvent(true, Enum.KeyCode.Horn, false, game)  -- Assuming 304 is Horn, adjust if needed
                    task.wait(0.5)
                    car:SetPrimaryPartCFrame(workspace.ParkingMarkers.destinationPart.CFrame + Vector3.new(0, 3, 0))
                    car.PrimaryPart.Velocity = Vector3.zero
                    game:GetService("VirtualInputManager"):SendKeyEvent(true, Enum.KeyCode.Horn, false, game)
                    local dcframe = workspace.ParkingMarkers.destinationPart.CFrame
                    repeat task.wait(0.1)
                        if (car.PrimaryPart.Position - dcframe.Position).Magnitude > 3 then
                            car.PrimaryPart.Velocity = Vector3.zero
                            car:PivotTo(dcframe)
                            game:GetService("VirtualInputManager"):SendKeyEvent(true, Enum.KeyCode.Horn, false, game)
                        end
                    until not workspace.ParkingMarkers:FindFirstChild("destinationPart") or not getfenv().customersfarm
                    game:GetService("VirtualInputManager"):SendKeyEvent(false, Enum.KeyCode.Horn, false, game)
                    getfenv().numbers = getfenv().numbers + 1
                    antiban = 0
                elseif workspace:Raycast(chr.HumanoidRootPart.Position, Vector3.new(0, -100, 0), raycastParams) and workspace:Raycast(chr.HumanoidRootPart.Position, Vector3.new(0, -100, 0), raycastParams).Instance.Name == "Terrain" and not ohsoso then
                    local closestRoad = nil
                    local distance = math.huge
                    for _, v in ipairs(workspace.World:GetDescendants()) do
                        if (string.find(v.Name:lower(), "road") and v:IsA("Part")) then
                            local dist = (chr.HumanoidRootPart.Position - v.Position).Magnitude
                            if dist < distance then
                                distance = dist
                                closestRoad = v
                            end
                        end
                    end
                    if closestRoad then car:PivotTo(closestRoad.CFrame) end
                    ohsoso = true
                elseif game.Players.LocalPlayer.variables.inMission.Value then
                    testvalue = testvalue - 0.02
                    if testvalue < 0 then
                        local closestRoad = nil
                        local distance = math.huge
                        for _, v in ipairs(workspace.World:GetDescendants()) do
                            if (string.find(v.Name:lower(), "road") and v:IsA("Part")) then
                                local dist = (chr.HumanoidRootPart.Position - v.Position).Magnitude
                                if dist < distance then
                                    distance = dist
                                    closestRoad = v
                                end
                            end
                        end
                        if closestRoad then car:PivotTo(closestRoad.CFrame) end
                        getfenv().stuck = getfenv().stuck + 1
                        testvalue = 1
                    end
                    -- Pathfinding optimized (reduced waypoint creation if possible)
                    local PathfindingService = game:GetService("PathfindingService")
                    local part1 = chr.HumanoidRootPart
                    local part2 = workspace.ParkingMarkers.destinationPart
                    local lerpCFrame = part1.CFrame:Lerp(part2.CFrame, testvalue)
                    local destination = Vector3.new(lerpCFrame.X, part2.Position.Y, lerpCFrame.Z)
                    local path = PathfindingService:CreatePath({AgentRadius = 20})
                    path:ComputeAsync(car.PrimaryPart.Position, destination)
                    local waypoints = path:GetWaypoints()
                    for _, waypoint in ipairs(waypoints) do
                        local rayUp = workspace:Raycast(waypoint.Position, Vector3.new(0, 1000, 0), raycastParams)
                        if not rayUp then
                            car:PivotTo(CFrame.new(waypoint.Position) + Vector3.new(0, 5, 0))
                            task.wait(0.05)
                        end
                    end
                else
                    local closestCustomer = nil
                    local distance = math.huge
                    for _, v in ipairs(workspace.NewCustomers:GetDescendants()) do
                        if v.Name == "Part" and v:GetAttribute("GroupSize") and v:FindFirstChildOfClass("CFrameValue") and game.Players.LocalPlayer.variables.seatAmount.Value > v:GetAttribute("GroupSize") and v:GetAttribute("Rating") < game.Players.LocalPlayer.variables.vehicleRating.Value then
                            local customerPos = v:FindFirstChildOfClass("CFrameValue").Value.Position
                            local dist = (v.Position - customerPos).Magnitude
                            if dist < distance then
                                distance = dist
                                closestCustomer = v
                            end
                        end
                    end
                    if closestCustomer then
                        for _, ya in ipairs(workspace.Vehicles:GetDescendants()) do
                            if ya.Name == "Player" and ya.Value == game.Players.LocalPlayer then
                                ya.Parent.Parent:SetPrimaryPartCFrame(closestCustomer.CFrame * CFrame.new(0, 3, 0))
                                task.wait(0.5)
                                fireproximityprompt(closestCustomer.Client.PromptPart.CustomerPrompt)
                                task.wait(2)
                            end
                        end
                    end
                end
            else
                game:GetService("ReplicatedStorage").Vehicles.GetNearestSpot:InvokeServer(game.Players.LocalPlayer.variables.carId.Value)
                task.wait(0.3)
                game:GetService("ReplicatedStorage").Vehicles.EnterVehicleEvent:InvokeServer()
            end
        end)
    end
end)

mainWindow:AddToggle("Auto Trophies", function(state)
    getfenv().Trophies = state
    game:GetService("ReplicatedStorage").Race.LeaveRace:InvokeServer()
    getfenv().showui = getfenv().Trophies
    task.spawn(function()
        local moneyGui = game.Players.LocalPlayer.PlayerGui.ScreenGui.Money
        if not getfenv().showui and moneyGui:FindFirstChild("Rep") then
            moneyGui.Rep:Destroy()
        else
            while getfenv().showui do
                task.wait(0.2)
                if not moneyGui:FindFirstChild("Rep") then
                    local oh = moneyGui.CashLabel:Clone()
                    oh.Name = "Rep"
                    oh.Parent = moneyGui
                    oh.Position = UDim2.new(3, 0, 0, 0)
                else
                    moneyGui.Rep.Text = "Rep: " .. tostring(game.Players.LocalPlayer.variables.rep.Value)
                end
            end
        end
    end)
    while getfenv().Trophies do
        task.wait(0.1)
        pcall(function()
            local hum = game.Players.LocalPlayer.Character.Humanoid
            if hum.Sit then
                if game.Players.LocalPlayer.variables.race.Value == "none" then
                    game:GetService("ReplicatedStorage").Race.TimeTrial:InvokeServer("circuit", 5)
                else
                    for _, b in ipairs(workspace.Vehicles:GetDescendants()) do
                        if b.Name == "Player" and b.Value == game.Players.LocalPlayer then
                            local car = b.Parent.Parent
                            for _, v in ipairs(workspace.Races.circuit.detects:GetChildren()) do
                                if v:IsA("Part") and v:FindFirstChild("TouchInterest") then
                                    v.CFrame = game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame
                                    firetouchinterest(car.PrimaryPart, v, 0)
                                    firetouchinterest(car.PrimaryPart, v, 1)
                                end
                            end
                            local finish = workspace.Races.circuit.timeTrial:FindFirstChildOfClass("IntValue").finish
                            finish.CFrame = game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame
                            firetouchinterest(car.PrimaryPart, finish, 0)
                            firetouchinterest(car.PrimaryPart, finish, 1)
                        end
                    end
                end
            else
                game:GetService("ReplicatedStorage").Vehicles.GetNearestSpot:InvokeServer(game.Players.LocalPlayer.variables.carId.Value)
                task.wait(0.3)
                game:GetService("ReplicatedStorage").Vehicles.EnterVehicleEvent:InvokeServer()
            end
        end)
    end
end)

mainWindow:AddToggle("Auto TimeTrial Medals", function(state)
    getfenv().medals = state
    game:GetService("ReplicatedStorage").Race.LeaveRace:InvokeServer()
    while getfenv().medals do
        task.wait(0.1)
        local hum = game.Players.LocalPlayer.Character.Humanoid
        if hum.Sit then
            for round = 1, 3 do
                for _, races in ipairs(workspace.Races:GetChildren()) do
                    if races:IsA("Folder") and getfenv().medals then
                        game:GetService("ReplicatedStorage").Race.TimeTrial:InvokeServer(races.Name, round)
                        task.wait(0.2)
                        if game.Players.LocalPlayer.variables.race.Value == "none" then
                            game:GetService("ReplicatedStorage").Race.TimeTrial:InvokeServer(races.Name, round)
                        else
                            for _, b in ipairs(workspace.Vehicles:GetDescendants()) do
                                if b.Name == "Player" and b.Value == game.Players.LocalPlayer then
                                    local car = b.Parent.Parent
                                    repeat task.wait(0.05)
                                        for _, v in ipairs(workspace.Races[races.Name].detects:GetChildren()) do
                                            if v:IsA("Part") and v:FindFirstChild("TouchInterest") then
                                                v.CFrame = game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame
                                                firetouchinterest(car.PrimaryPart, v, 0)
                                                firetouchinterest(car.PrimaryPart, v, 1)
                                            end
                                        end
                                    until workspace.Races[races.Name].timeTrial:FindFirstChildOfClass("IntValue") or not getfenv().medals
                                    repeat task.wait(0.05)
                                        for _, v in ipairs(workspace.Races[races.Name].detects:GetChildren()) do
                                            if v:IsA("Part") and v:FindFirstChild("TouchInterest") then
                                                v.CFrame = game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame
                                                firetouchinterest(car.PrimaryPart, v, 0)
                                                firetouchinterest(car.PrimaryPart, v, 1)
                                            end
                                        end
                                        pcall(function()
                                            local finish = workspace.Races[races.Name].timeTrial:FindFirstChildOfClass("IntValue").finish
                                            finish.CFrame = game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame
                                            firetouchinterest(car.PrimaryPart, finish, 0)
                                            firetouchinterest(car.PrimaryPart, finish, 1)
                                        end)
                                    until game.Players.LocalPlayer.variables.race.Value == "none" or not getfenv().medals
                                end
                            end
                        end
                    end
                end
            end
        else
            game:GetService("ReplicatedStorage").Vehicles.GetNearestSpot:InvokeServer(game.Players.LocalPlayer.variables.carId.Value)
            task.wait(0.3)
            game:GetService("ReplicatedStorage").Vehicles.EnterVehicleEvent:InvokeServer()
        end
    end
end)

mainWindow:AddToggle("Auto Upgrade Office", function(state)
    getfenv().ofs = state
    while getfenv().ofs do
        task.wait(0.2)
        if not game.Players.LocalPlayer:FindFirstChild("Office") then
            game:GetService("ReplicatedStorage").Company.StartOffice:InvokeServer()
            task.wait(0.1)
        end
        if game.Players.LocalPlayer.Office:GetAttribute("level") < 16 then
            game:GetService("ReplicatedStorage").Company.SkipOfficeQuest:InvokeServer()
            game:GetService("ReplicatedStorage").Company.UpgradeOffice:InvokeServer()
        end
    end
end)

-- Teleports Window: Organized into dropdowns for premium feel
local teleportsWindow = library:CreateWindow({
    text = "Taxi Boss - Teleports"
})

teleportsWindow:AddLabel("Select Location to Teleport")
teleportsWindow:AddLabel("Group 1")
teleportsWindow:AddDropdown({"Select", "Beechwood", "Beechwood Beach", "Boss Airport", "Bridgeview", "Cedar Side", "Central Bank", "Central City", "City Park", "Coconut Park", "Country Club", "Da Hills", "Doge Harbor"}, function(state)
    if state == "Select" then return end
    local locations = {
        Beechwood = game.ReplicatedStorage.Places.Beechwood,
        ["Beechwood Beach"] = game.ReplicatedStorage.Places["Beechwood Beach"],
        ["Boss Airport"] = CFrame.new(-637.1304931640625, 38.99796676635742, 4325.2275390625),
        Bridgeview = CFrame.new(1354.4610595703125, 10.30431079864502, 1278.8033447265625),
        ["Cedar Side"] = game.ReplicatedStorage.Places["Cedar Side"],
        ["Central Bank"] = game.ReplicatedStorage.Places["Central Bank"],
        ["Central City"] = game.ReplicatedStorage.Places["Central City"],
        ["City Park"] = game.ReplicatedStorage.Places["City Park"],
        ["Coconut Park"] = game.ReplicatedStorage.Places["Coconut Park"],
        ["Country Club"] = game.ReplicatedStorage.Places["Country Club"],
        ["Da Hills"] = CFrame.new(2348.347412109375, 73.10881805419922, -1537.3157958984375),
        ["Doge Harbor"] = CFrame.new(3335.737548828125, 24.955890655517578, 2773.038818359375)
    }
    local targetCFrame = locations[state] or CFrame.new(0,0,0)
    if typeof(targetCFrame) == "Instance" then targetCFrame = targetCFrame.CFrame end
    local chr = game.Players.LocalPlayer.Character
    local hum = chr.Humanoid
    local offset = Vector3.new(0, hum.SeatPart and 40 or 30, 0)
    if hum.SeatPart then
        hum.SeatPart.Parent.Parent:PivotTo(targetCFrame + offset)
    else
        chr:PivotTo(targetCFrame + offset)
    end
end)

teleportsWindow:AddLabel("Group 2")
teleportsWindow:AddDropdown({"Select", "Gas Station", "Gas Station 2", "Harborview", "Hawthorn Park", "Hospital", "Industrial District", "Logistic District", "Master Hotel", "Military Base", "Noll Cliffs", "Nuclear Power Plant", "OFF ROAD Test Track"}, function(state)
    if state == "Select" then return end
    local locations = {
        ["Gas Station"] = CFrame.new(103.700256, 0, -640.599792),
        ["Gas Station 2"] = CFrame.new(930.7002563476562, 0, 643.4002075195312),
        Harborview = game.ReplicatedStorage.Places.Harborview,
        ["Hawthorn Park"] = game.ReplicatedStorage.Places["Hawthorn Park"],
        Hospital = game.ReplicatedStorage.Places.Hospital,
        ["Industrial District"] = game.ReplicatedStorage.Places["Industrial District"],
        ["Logistic District"] = CFrame.new(588.2861938476562, 53.5777473449707, 2529.95361328125),
        ["Master Hotel"] = CFrame.new(2736.1591796875, 15.864909172058105, -202.09945678710938),
        ["Military Base"] = game.ReplicatedStorage.Places["Military Base"],
        ["Noll Cliffs"] = game.ReplicatedStorage.Places["Noll Cliffs"],
        ["Nuclear Power Plant"] = game.ReplicatedStorage.Places["Nuclear Power Plant"],
        ["OFF ROAD Test Track"] = game.ReplicatedStorage.Places["OFF ROAD Test Track"]
    }
    local targetCFrame = locations[state] or CFrame.new(0,0,0)
    if typeof(targetCFrame) == "Instance" then targetCFrame = targetCFrame.CFrame end
    local chr = game.Players.LocalPlayer.Character
    local hum = chr.Humanoid
    local offset = Vector3.new(0, hum.SeatPart and 40 or 30, 0)
    if hum.SeatPart then
        hum.SeatPart.Parent.Parent:PivotTo(targetCFrame + offset)
    else
        chr:PivotTo(targetCFrame + offset)
    end
end)

teleportsWindow:AddLabel("Group 3")
teleportsWindow:AddDropdown({"Select", "Ocean Viewpoint", "Oil Refinery", "Old Town", "Popular Street", "Small Town", "St. Noll Viewpoint", "Sunny Elementary", "Sunset Grove", "Taxi Central", "high school", "mall", "the beach", "🌎 Race Club"}, function(state)
    if state == "Select" then return end
    local locations = {
        ["Ocean Viewpoint"] = game.ReplicatedStorage.Places["Ocean Viewpoint"],
        ["Oil Refinery"] = game.ReplicatedStorage.Places["Oil Refinery"],
        ["Old Town"] = game.ReplicatedStorage.Places["Old Town"],
        ["Popular Street"] = game.ReplicatedStorage.Places["Popular Street"],
        ["Small Town"] = game.ReplicatedStorage.Places["Small Town"],
        ["St. Noll Viewpoint"] = game.ReplicatedStorage.Places["St. Noll Viewpoint"],
        ["Sunny Elementary"] = game.ReplicatedStorage.Places["Sunny Elementary"],
        ["Sunset Grove"] = game.ReplicatedStorage.Places["Sunset Grove"],
        ["Taxi Central"] = game.ReplicatedStorage.Places["Taxi Central"],
        ["high school"] = game.ReplicatedStorage.Places["high school"],
        mall = game.ReplicatedStorage.Places.mall,
        ["the beach"] = game.ReplicatedStorage.Places["the beach"],
        ["🌎 Race Club"] = game.ReplicatedStorage.Places["🌎 Race Club"]
    }
    local targetCFrame = locations[state] or CFrame.new(0,0,0)
    if typeof(targetCFrame) == "Instance" then targetCFrame = targetCFrame.CFrame end
    local chr = game.Players.LocalPlayer.Character
    local hum = chr.Humanoid
    local offset = Vector3.new(0, hum.SeatPart and 40 or 30, 0)
    if hum.SeatPart then
        hum.SeatPart.Parent.Parent:PivotTo(targetCFrame + offset)
    else
        chr:PivotTo(targetCFrame + offset)
    end
end)

-- Miscellaneous Window
local miscWindow = library:CreateWindow({
    text = "Taxi Boss - Miscellaneous"
})

miscWindow:AddLabel("Vehicle Buyer")
miscWindow:AddBox("Enter Vehicle Name", function(object, focus)
    if focus then
        local carName = object.Text
        local carList = require(game.ReplicatedStorage.ModuleLists.CarList)
        for _, v in ipairs(carList) do
            if string.find(v.name:lower(), carName:lower()) then
                game.ReplicatedStorage.DataStore.PurchaseVehicle:InvokeServer(v.id)
                break
            end
        end
    end
end)

miscWindow:AddButton("Unlock Taxi Radar", function()
    game.Players.LocalPlayer.variables.vip.Value = true
end)

miscWindow:AddButton("Show Players Stats", function()
    game:GetService("VirtualInputManager"):SendKeyEvent(true, Enum.KeyCode.F9, false, game)
    print("Players Owned Cars & Stats")
    for _, player in ipairs(game.Players:GetPlayers()) do
        print("------------------ " .. player.Name .. " Owned Cars ------------------")
        local ownedCars = {}
        for _, b in ipairs(player.Data.OwnedCars:GetChildren()) do
            if b:IsA("BoolValue") and b.Value then
                local carList = require(game.ReplicatedStorage.ModuleLists.CarList)
                for _, d in ipairs(carList) do
                    if d.id == tonumber(b.Name) then
                        table.insert(ownedCars, d.name)
                    end
                end
            end
        end
        print(table.concat(ownedCars, ", "))
        print("------------------ " .. player.Name .. " Currencies ------------------")
        print(player.variables.candy.Name .. ": " .. player.variables.candy.Value)
        print(player.variables.rep.Name .. ": " .. player.variables.rep.Value)
        print(player.Data.coconuts.Name .. ": " .. player.Data.coconuts.Value)
        print("------------------ " .. player.Name .. " Race Best Times ------------------")
        local raceTimes = player.Data.BestTimes:GetAttributes()
        for name, time in pairs(raceTimes) do
            print(name .. ": " .. time)
        end
    end
end)

miscWindow:AddButton("Reset Character", function()
    game.Players.LocalPlayer.Character:BreakJoints()
end)

miscWindow:AddButton("Remove AI Vehicles", function()
    workspace.Tracks:Destroy()
end)

miscWindow:AddButton("Remove Locked Area Barriers", function()
    workspace.AreaLocked:Destroy()
end)

miscWindow:AddToggle("Donut God Mode", function(state)
    getfenv().donut = state
    while getfenv().donut do
        task.wait(0.05)
        pcall(function()
            local seatPart = game.Players.LocalPlayer.Character.Humanoid.SeatPart
            seatPart.RotVelocity = Vector3.new(0, seatPart.RotVelocity.Y + 10, 0)
        end)
    end
end)
